syntax = "proto3";

package consensuscraft;

option go_package = "./gen/pb";

service ConsensusCraftService {
  // Register a node with address, pubkey and signature, returns database data
  rpc RegisterNode(RegisterNodeRequest) returns (stream DatabaseEntry);
  
  // Bidirectional stream for inventory updates between nodes
  rpc Inventories(stream InventoryMessage) returns (stream InventoryMessage);
}

message RegisterNodeRequest {
  string address = 1;
  bytes public_key = 2;
  bytes signature = 3;
}

message DatabaseEntry {
  bytes key = 1;
  bytes value = 2;
}

message InventoryMessage {
  string player_name = 1;
  bytes inventory_data = 2;
}
